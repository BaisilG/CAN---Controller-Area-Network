Controller Area Network (CAN) 
-----------------------------

CAN - data bus is a serial communications protocol that supports distributed real-time control with a high level of security.

Introduced in the 1980s by Robert Bosch GmbH, the CAN bus was first installed in Mercedes-Benz cars. 

To improve safety and comfort, many electronic control units (ECU), such as anti-lock braking, engine management, traction control, air conditioning control, central door locking and powered seat and mirror controls, were added in automobiles.

To interconnect these ECUs and reduce large wiring looms, the CAN bus was implemented. It is capable of working reliably, even in harsh environments.

Because of its success in automobiles, CAN bus technology attracted the attention of manufacturers in other industries, including process control, textiles and medical instruments. Because of its versatility, Airbus opened the door for CAN bus in the superjumbo A380.

CAN bus operates at data rates of up to 1 Mb/sec for cable lengths less than 40 meters. If the cable length increases, the data rate typically falls to 125 Kb/sec for 500 meters (1,640 feet) in length. The data signal is normally transmitted on a twisted pair of wires (shielded or unshielded), but single wire and ground, optical fibre can also be used.



Controllers connected to the CAN bus can transmit data to the bus and receive data from the bus. Data collisions on the bus are avoided using the CSMA/AMP technique. Carrier Sense Multiple Access (CSMA) ensures that a terminal will transmit only when the bus is quiet (no carrier). If two or more terminals try to transmit at the same time, the bus arbitration logic connects the terminal with a higher-priority message (Arbitration based on Message Priority).


There is no theoretical limit to the number of terminals that can be connected to the bus, but it is normally limited to 32 to avoid data delay. Data encoding is NRZ with bit stuffing.


The bus can have one of the two logic values — dominant or recessive. During simultaneous transmission of dominant bit (logic0) and recessive bit (logic1), the resulting value will be dominant. For example, in case of a wired – AND implementation of the bus, the dominant level will be represented by a logical 0 and the recessive level would be represented by logical 1.

The CAN bus has different versions, including CAN 2.0A, CAN 2.0B and CAN Open. The International Standards Organization (ISO) has specified ISO 11898 (High speed CAN bus, up to 1Mb/sec) and ISO 11519 (Low speed CAN bus, 125Kb/sec).


Working Principle

CAN is a broadcast-type bus. A message transmitted by one line replaceable unit (LRU) is received by all the LRUs connected to the bus. Each LRU will have a filter to accept the message relevant to it. Data messages transmitted from any terminal on a CAN bus do not contain source address or destination address. A data message is transmitted as a frame.


In each frame, the message is labeled by an identifier that is unique throughout the network. All other LRUs on the network receive the message and each performs an acceptance test on the identifier to determine if the message and its content are relevant to that particular LRU.


	

three LRUs are connected to a CAN bus. Each one of them is capable of transmitting to the bus and can receive data from the bus.

To prevent data collision, only one can transmit at any one time, but all can receive at the same time.

Suppose LRU 1, a fuel quantity processor unit, is transmitting fuel quantity data (assume 11bit ID=6BC in hex) to the CAN bus. LRU 2, a water quantity summation unit, receives the data but filters it because it is not going to use this data. LRU 3, a fuel quantity indicator, receives the data transmitted by LRU 1 and uses it to display the fuel quantity.



The CAN bus data frame consists of seven different bit fields: Start of Frame; Arbitration; Control; Data; CRC; ACK; and End of Frame

